<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<TargetFramework>net5.0-windows10.0.19041.0</TargetFramework>
	</PropertyGroup>

	<Target Name="GenerateProjection" BeforeTargets="Build">
		<PropertyGroup>
			<GeneratedFilesDir Condition="'$(GeneratedFilesDir)'==''">$([MSBuild]::NormalizeDirectory('$(MSBuildProjectDirectory)', '$(IntermediateOutputPath)', 'Generated Files'))</GeneratedFilesDir>
			<CsWinRTVerbosity>high</CsWinRTVerbosity>
			<CsWinRTResponseFile>$(GeneratedFilesDir)cswinrt_test.rsp</CsWinRTResponseFile>
			<CsWinRTCommand>$(CsWinRTExe) %40"$(CsWinRTResponseFile)"</CsWinRTCommand>
		</PropertyGroup>
		<PropertyGroup>
			<CsWinRTParams>
				-verbose

				# Include Windows SDK metadata to satisfy references to
				# Windows types from project-specific metadata.
				-in 10.0.19041.0

				# Don't project referenced Windows types, as these are
				# provided by the Windows interop assembly.
				-exclude Windows

				# Reference project-specific winmd files, defined elsewhere,
				# such as from a NuGet package.
				-in E:\Documents\SanityEngine\x64\Debug\Sanity.winmd

				# Include project-specific namespaces/types in the projection
				-include Sanity

				# Write projection sources to the "Generated Files" folder,
				# which should be excluded from checkin (e.g., .gitignored).
				-out "$(ProjectDir)Generated Files"
			</CsWinRTParams>
		</PropertyGroup>
		<WriteLinesToFile File="$(CsWinRTResponseFile)" Lines="$(CsWinRTParams)" Overwrite="true" WriteOnlyWhenDifferent="true" />
		<Message Text="$(CsWinRTCommand)" Importance="$(CsWinRTVerbosity)" />
		<Exec Command="$(CsWinRTCommand)" />
	</Target>

	<PropertyGroup>
		<RestoreProjectStyle>PackageReference</RestoreProjectStyle>
	</PropertyGroup>

	<ItemGroup>
		<PackageReference Include="Microsoft.UI.Xaml" Version="2.5.0-prerelease.200812001" />
		<PackageReference Include="Microsoft.Windows.CsWinRT">
			<Version>0.1.0-prerelease.200629.3</Version>
		</PackageReference>
	</ItemGroup>

	<PropertyGroup Condition=" '$(VisualStudioVersion)' == '' or '$(VisualStudioVersion)' &lt; '14.0' ">
		<VisualStudioVersion>14.0</VisualStudioVersion>
	</PropertyGroup>

	<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
		<PlatformTarget>x64</PlatformTarget>
		<DefineConstants>DEBUG;TRACE</DefineConstants>
		<AllowUnsafeBlocks>true</AllowUnsafeBlocks>
	</PropertyGroup>

</Project>
